(function(n,t,i){function a(n,i){i?t.observable.track(n,{beforeChange:i.beforeChange&&f(i.beforeChange),afterChange:i.afterChange&&f(i.afterChange),afterEvent:i.afterEvent&&f(i.afterEvent)}):t.observable.track(n,null)}function f(n){return function(t,i,r){if(i=="propertyChange"){var u={newValues:{},oldValues:{}};return u.newValues[r.path]=r.value,u.oldValues[r.path]=t[r.path],n.call(this,t,"change",u)}if(i=="arrayChange")switch(r.change){case"insert":return n.call(this,t,"insert",{index:r.index,items:r.items});case"remove":return n.call(this,t,"remove",{index:r.index,items:r.items});case"refresh":return n.call(this,t,"replaceAll",{newItems:r.newItems,oldItems:r.oldItems})}throw"NYI - event '"+i+"' and '"+r.change+"' is not supported!";}}function y(n,i,r){n.splice.apply(n,[i,0].concat(r));var u={change:"insert",index:i,items:r};t([n]).triggerHandler("arrayChange",u)}function v(n,i,r){var f=n.slice(i,i+r),u;n.splice(i,r),u={change:"remove",index:i,items:f},t([n]).triggerHandler("arrayChange",u)}function h(n,i){var u=n.slice(0),r;n.splice.apply(n,[0,n.length].concat(i)),r={change:"refresh",oldItems:u,newItems:i},t([n]).triggerHandler("arrayChange",r)}function b(n,i){return!t.isFunction(n[i])}function w(n,t){return n[t]}function p(n,i,r){var f=n[i],u;n[i]=r,u={path:i,value:r},t(n).triggerHandler("propertyChange",u)}function s(n){return i.isArray(n)}function o(n){return n||[]}function e(n){return n}function l(n){return n}function c(n){return n}var u=i.defineNamespace("upshot.observability");u.jsviews={track:a,insert:y,remove:v,refresh:h,isProperty:b,getProperty:w,setProperty:p,isArray:s,createCollection:o,asArray:e,map:l,unmap:c,setContextProperty:t.noop},u.configuration=u.jsviews})(this,jQuery,upshot);