(function(n,t,i){function b(n,t){t?i.cache(n,e,new s(n,t.beforeChange,t.afterChange,t.afterEvent)):i.deleteCache(n,e)}function w(n,i,r){n.splice.apply(n,[i,0].concat(r));var u={index:i,items:r};t([n]).triggerHandler("insert",u)}function v(n,i,r){var f=n.slice(i,i+r),u;n.splice(i,r),u={index:i,items:f},t([n]).triggerHandler("remove",u)}function p(n,i){var u=n.slice(0),r;n.splice.apply(n,[0,n.length].concat(i)),r={oldItems:u,newItems:i},t([n]).triggerHandler("replaceAll",r)}function g(n,i){return!t.isFunction(n[i])}function d(n,t){return n[t]}function k(n,i,r){var o=n[i],u,f,e;n[i]=r,u={},f={},u[i]=o,f[i]=r,e={oldValues:u,newValues:f},t(n).triggerHandler("change",e)}function l(n){return i.isArray(n)}function c(n){return n||[]}function h(n){return n}function y(n){return n}function a(n){return n}var e="__cachedObservable__",o=t.observable.Observable,u,s,f;t.observable=function(n){return i.cache(n,e)||new o(n)},u=o.prototype,s=i.deriveClass(u,function(n,t,i,r){o.call(this,n),this.beforeChange=t,this.afterChange=i,this.afterEvent=r},{_property:function(n,t){return this.beforeChange&&this.beforeChange(this.data,"change",{oldValues:n,newValues:t}),u._property.apply(this,arguments)},_insert:function(n,t){this.beforeChange&&this.beforeChange(this.data,"insert",{index:n,items:t}),u._insert.apply(this,arguments)},_remove:function(n,t){if(this.beforeChange){var i=this.data.slice(n,n+t);this.beforeChange(this.data,"remove",{index:n,items:i})}u._remove.apply(this,arguments)},replaceAll:function(n){this.beforeChange&&this.beforeChange(this.data,"replaceAll",{oldItems:this.data.slice(0),newItems:n}),u.replaceAll.apply(this,arguments)},_trigger:function(n,t){this.afterChange&&this.afterChange(this.data,n,t),u._trigger.apply(this,arguments),this.afterEvent&&this.afterEvent(this.data,n,t)}}),f=i.defineNamespace("upshot.observability"),f.jquery={track:b,insert:w,remove:v,refresh:p,isProperty:g,getProperty:d,setProperty:k,isArray:l,createCollection:c,asArray:h,map:y,unmap:a,setContextProperty:t.noop},f.configuration=f.jquery})(this,jQuery,upshot);